{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Pollaboration - {{question.question}} - Detailed view{% endblock title %}

{% block extra_css %}
<link href="{% static 'css/jquery-ui-1.10.3.custom.css' %}" rel="stylesheet">
<link href='http://fonts.googleapis.com/css?family=Alegreya:400,700,900' rel='stylesheet' type='text/css'>
{% endblock extra_css %}

{% block question_details %}

<div id="question_details" class="row bottom-buffer">

    <div id="sunburstcontainer" class="col-12 col-lg-7 col-sm-9 pull-center darkgray">
    <h1 class="text-center">{{question.question}}</h1>
       <p class="text-center">Submit on {{question.created}}. Last answered on {{question.modified}}.</p>
       <p class="text-center">Answer frequency: X per day, Y per week, Z per month.</p>
    <div class ="row">
    <div class ="pollChart" id="sunburst">
    <!--<h4>Split by:</h4>
    <div class="filter">
        <select onchange="change(this)" name="stat" id="1">
        <option value="-" selected="selected">STAT</option>
        <option value="agegroup">Age Group</option>
        <option value="gender">Gender</option>
        <option value="political">Politics</option>
        </select>
    </div>
    <div class="filter">
        <select onchange="change(this)" name="stat" id="2">
        <option value="-" selected="selected">STAT</option>
        <option value="agegroup">Age Group</option>
        <option value="gender">Gender</option>
        <option value="political">Politics</option>
        </select>
    </div>
    <div id="newlegendholder" class="col-12 col-lg-4 col-sm-4">
        <div class="filter">
            <h4>Split by: </h4>
            <select id="filter1"></select>
            <select id="filter2"></select>
        </div>
    </div> -->

    </div>
    </div>



     <p class="text-right">
        SHARE: 
        <a href="#" class="social facebook icon-big"></a>
        <a href="#" class="social twitter icon-big"></a>
        <a href="#" class="social google_plus icon-big"></a>
     </p>
    </div>
</div>
<script src="{% static 'js/jquery.js' %}"></script>
<script src="{% static 'js/vendor/d3.js' %}"></script>
<script src="{% static 'js/vendor/underscore.js' %}"></script>
<script src="{% static 'js/moment.js' %}"></script>
<script src="{% static 'js/jquery-ui-1.10.3.custom.js' %}"></script>
<script src="{% static 'js/d3-compat.js' %}"></script>
<script src="{% static 'js/bootstrap-tooltip.js' %}"></script>
<script src="{% static 'js/colorbrewer.js' %}"></script>

{% endblock question_details %}

{% block extra_js %}
<script src="{% static 'js/chart.js' %}"></script>
<script src="{% static 'js/jquery.ui.slider-drag-patch.js' %}"></script>
<script>
    (function(){
        var pollChart = window.pollChart;
/*        d3.select("form select").on("change", function() {
            console.log(this.options[this.selectedIndex].value);
            url = "/questions/getjson/"+this.options[this.selectedIndex].value+"/";
url = "/questions/getjson/{{question.id}}";
            pollChart.showSunburst(url);
        });*/
        url = "/questions/getjson/{{question.id}}";
        data = JSON.parse('{{json|safe}}');
        console.log(data);
        pollChart.showSunburst(data);
        console.log("hi");
        console.log(pollChart.sunburst(opts));
    })();
    
</script>
<script>
function(){
    console.log("sunburst");
    console.log(pollChart.sunburst);
}
</script>
{% endblock extra_js %}