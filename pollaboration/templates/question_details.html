{% extends "base.html" %}

{% load staticfiles %}

{% block title %}Pollaboration - QUESTION TITLE{% endblock title %}

{% block question_details %}

<div class="row">
    <div class="col-12 col-lg-7 col-sm-9 pull-center lightgray">
    <div class="pollChart" id="sunburst"></div>
     <p class="text-right">
        <a href="#"><i class="icon-facebook_circle icon3x"></i></a>
        <a href="#"><i class="icon-twitter_circle icon3x"></i></a>
        <a href="#"><i class="icon-google_plus_circle icon3x"></i></a>
     </p>
    </div>
</div>

<script src="{% static 'js/vendor/d3.js' %}"></script>
<script src="{% static 'js/vendor/underscore.js' %}"></script>
<script src="{% static 'js/chart.js' %}"></script>
<script>
    (function(){
        var pollChart = window.pollChart;
        d3.select("form select").on("change", function() {
            console.log(this.options[this.selectedIndex].value);
/*            url = "/questions/getjson/"+this.options[this.selectedIndex].value+"/";*/
            pollChart.showSunburst('{{json|safe}}');
        });
        data = JSON.parse('{{json|safe}}');
        console.log(data);
        pollChart.showSunburst(data);

    })();

</script>

{% endblock question_details %}